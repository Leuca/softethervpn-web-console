From 4a9aa97c8001389c63d6dcbb77f3963637bb7148 Mon Sep 17 00:00:00 2001
From: Luca Magrone <luca@magrone.cc>
Date: Tue, 18 Oct 2022 05:21:19 +0200
Subject: [PATCH] Make the library shared

Make cpu_features shared with soversion 0.1.0 (26133d3)

Signed-off-by: Luca Magrone <luca@magrone.cc>
---
 CMakeLists.txt | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 591c116..c69ba4d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -14,7 +14,7 @@ endif(NOT CMAKE_BUILD_TYPE)
 option(BUILD_TESTING "Enable test (depends on googletest)." OFF)
 # BUILD_SHARED_LIBS is a standard CMake variable, but we declare it here to make
 # it prominent in the GUI.
-option(BUILD_SHARED_LIBS "Build library as shared." OFF)
+option(BUILD_SHARED_LIBS "Build library as shared." ON)
 
 #
 # library : cpu_features
@@ -60,7 +60,7 @@ target_include_directories(cpu_features
   PRIVATE
   include/internal
 )
-set_target_properties(cpu_features PROPERTIES PUBLIC_HEADER "${_HDRS}")
+set_target_properties(cpu_features PROPERTIES PUBLIC_HEADER "${_HDRS}" SOVERSION 0.1.0)
 target_compile_definitions(cpu_features
   PUBLIC STACK_LINE_READER_BUFFER_SIZE=1024)
 target_link_libraries(cpu_features PUBLIC ${CMAKE_DL_LIBS})
-- 
2.37.3

